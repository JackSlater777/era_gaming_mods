ZVSE2

** BERSERKER FLIES
** «Ã»»-¡≈–—≈– ≈–€

** Option 046 by Timothy Pulver
** Rewritten by igrik (29.09.2020)

* Dragon Flies gain the ability to attack without retaliation,
* cast Berserk on their target, and return after attacking.

** Attention! The script works if the troops experience is enabled


!#DC(WOG_OPT_BERSERKER_FLIES) = 46;


!?FU(OnAfterErmInited);
!!UN:P(WOG_OPT_BERSERKER_FLIES)/?(wogOption:y);  
!!FU&(wogOption)<>(TRUE):E;

!!UN:P(WOG_OPT_STACK_EXPERIENCE)/?(wogOption);
!!FU&(wogOption)<>(TRUE):E;

!!SN:H^monname^/(MON_DRAGON_FLY)/0/^%T(wog.46.singular)^;  
!!SN:H^monname^/(MON_DRAGON_FLY)/1/^%T(wog.46.plural)^; 
!!SN:H^monname^/(MON_DRAGON_FLY)/2/?(description:z);
!!SN:H^monname^/(MON_DRAGON_FLY)/2/^%(description)%T(wog.46.description)^;

!!MA:X(MON_DRAGON_FLY)/?(flags:y1);   
!!VR(flags):|(MON_FLAG_NO_RETALIATION); 
!!MA:X(MON_DRAGON_FLY)/(flags);   

!!VR(line:y):S(NULL); initializate y var
!!EA(MON_DRAGON_FLY):F102/98/?(line); [Check for Strike & Return/next available bonus line]
!!EA(MON_DRAGON_FLY)&(line)>=0:B(line)/1/102/98/1/1/1/1/1/1/1/1/1/1/1; [Give Dragon Flies Strike & Return]
!!EA(MON_DRAGON_FLY):F99/59/?(line);  [Check for Berserk casting/next available bonus line]
!!EA(MON_DRAGON_FLY)&(line)>=0:B(line)/1/99/59/20/25/30/35/40/45/50/55/60/65/70; [Give Dragon Flies Berserk Casting]

** End of Script **
